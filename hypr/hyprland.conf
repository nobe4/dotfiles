# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,auto

# See https://wiki.hyprland.org/Configuring/Keywords/
$terminal = kitty
$mouse_left = mouse:272
$mouse_right = mouse:273

# Environment variables are set in ~/.config/uwsm/env
# See https://wiki.hyprland.org/Configuring/Environment-variables/

exec-once = waybar
exec-once = hypridle
exec-once = firefox

# PERMISSIONS
# TODO
# See https://wiki.hyprland.org/Configuring/Permissions/

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 0
    gaps_out = 0

    border_size = 2

    col.active_border = rgb(878988) # c9
    col.inactive_border = rgb(1d1f21) # c1

    layout = dwindle

    snap {
	    enabled = true
    }
}

decoration {
    blur:enabled = false
    shadow:enabled = false
}

animations:enabled = false

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true
    preserve_split = true
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    vfr = true
}


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
# TODO: check how xkb works and how to configure keymappings better
input {
	kb_layout = eu
    follow_mouse = 1

    sensitivity = 1 # -1.0 - 1.0, 0 means no modification.
}

binds {
	allow_workspace_cycles = true
	workspace_back_and_forth = true
}

ecosystem {
	no_donation_nag = true
}


# See https://wiki.hyprland.org/Configuring/Keywords/
$leader = SUPER

bind = $leader, SPACE, exec, rofi -show drun

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
# Example with log redirection
# bind = $leader, T, exec, kitty > /tmp/kitty.log 2> /tmp/kitty.err.log

# NOTE: trailing comma needed for sendshortcut

bind = $leader, q, exec, notify-send "TODO leader-q" -t 1000
bind = $leader, w, exec, notify-send "TODO leader-w" -t 1000
bind = $leader, f, exec, notify-send "TODO leader-f" -t 1000
bind = $leader, p, exec, notify-send "TODO leader-p" -t 1000
bind = $leader, g, exec, notify-send "TODO leader-g" -t 1000

bind = $leader, a, exec, notify-send "TODO leader-a" -t 1000
bind = $leader, r, exec, notify-send "TODO leader-r" -t 1000
bind = $leader, s, exec, notify-send "TODO leader-s" -t 1000
bind = $leader, t, exec, notify-send "TODO leader-t" -t 1000
bind = $leader, d, exec, notify-send "TODO leader-d" -t 1000

bind = $leader, z, sendshortcut, CTRL,  z,
bind = $leader, x, sendshortcut, CTRL,  x,
# ctrl+insert/shift+insert are standards copy/paste shortcuts
bind = $leader, c, sendshortcut, CTRL,  INSERT,
bind = $leader, v, sendshortcut, SHIFT, INSERT,

# bind = $leader, b, exec, notify-send "TODO leader-b"

# Right hand
bind = $leader, h, workspace, -1
bind = $leader, n, togglefloating,
bind = $leader, e, fullscreen, 1
bind = $leader, i, workspace, +1
bind = $leader, o, exec, notify-send "TODO leader-o" -t 1000

bind = $leader, j, movetoworkspace, -1
bind = $leader, l, exec, notify-send "TODO leader-l" -t 1000
# bind = $leader, u, exec, notify-send "TODO leader-u" -t 1000
bind = $leader, u, exec, /home/nobe4/dev/nobe4/dotfiles/bin/screenshot
bind = $leader, y, movetoworkspace, +1
# Kill waybar as to get out of the `prevent idle`.
bind = $leader, apostrophe, exec, pkill waybar && hyprctl dispatch exec waybar && loginctl lock-session

bind = $leader, k, killactive
bind = $leader, m, exec, notify-send "TODO leader-m" -t 1000
bind = $leader, comma, exec, notify-send "TODO leader-, " -t 1000

bind = $leader, period, exec, notify-send "TODO leader-." -t 1000
bind = $leader, return, exec, $terminal

# TODO: check how to use environment-variables, or add the PATH.
bind = , XF86Launch5, exec, /home/nobe4/dev/nobe4/dotfiles/bin/$(printf "screenshot\nscreenrecord" | rofi -dmenu)
bind = , F11,         exec, /home/nobe4/dev/nobe4/dotfiles/bin/commands/emoji --rofi

# Move/resize windows with leader + LMB/RMB and dragging
bindm = $leader,  $mouse_left,  movewindow
bindm = $leader,  $mouse_right, resizewindow

# Multimedia keys
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# bindl = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86AudioPlay, exec, playerctl play-pause

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Use `hyprctl clients` to list all windows
windowrule = float,class:^(steam*)$

windowrule = float,class:^(org.pulseaudio.pavucontrol)$
windowrule = maximize,class:^(org.pulseaudio.pavucontrol)$

windowrule = float, center 1, class:^(1password)$

windowrule = float, center 1, title:^(Export Image as .*)$
windowrule = float, center 1, class:^(gimp)$, title:^(Export Image)$

windowrule = float, center 1, class:^(firefox)$, title:^(Picture-in-Picture)$

windowrule = float, size 900 600, move onscreen cursor, class:^(kitty)$, title:^(waybar-iwctl)$
windowrule = float, size 900 600, move onscreen cursor, class:^(kitty)$, title:^(waybar-htop)$

windowrule = float, size 800 620, class:^(kitty)$, title:^(weather)$


# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# debug {
# 	disable_logs = false
# 	enable_stdout_logs = true
# }
