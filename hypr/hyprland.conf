# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,auto

# See https://wiki.hyprland.org/Configuring/Keywords/
$terminal = kitty
$mouse_left = mouse:272
$mouse_right = mouse:273

# Environment variables are set in ~/.config/uwsm/env
# See https://wiki.hyprland.org/Configuring/Environment-variables/

exec-once = waybar
exec-once = hypridle
exec-once = $terminal
exec-once = firefox

# PERMISSIONS
# TODO
# See https://wiki.hyprland.org/Configuring/Permissions/

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 0
    gaps_out = 0

    border_size = 2

    col.active_border = rgba(555555aa)
    col.inactive_border = rgba(111111aa)

    layout = dwindle

    snap {
	    enabled = true
    }
}

decoration {
    blur:enabled = false
    shadow:enabled = false
}

animations:enabled = false

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true
    preserve_split = true
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    vfr = true
}


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
# TODO: check how xkb works and how to configure keymappings better
input {
    follow_mouse = 1

    sensitivity = 1 # -1.0 - 1.0, 0 means no modification.
}

binds {
	allow_workspace_cycles = true
	workspace_back_and_forth = true
}

ecosystem {
	no_donation_nag = true
}


# See https://wiki.hyprland.org/Configuring/Keywords/
$leader = SUPER

bind = $leader, SPACE, exec, rofi -show drun

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
# Example with log redirection
# bind = $leader, T, exec, kitty > /tmp/kitty.log 2> /tmp/kitty.err.log

bind = $leader, q, exec, notify-send "TODO leader-q" -t 1000
bind = $leader, w, exec, notify-send "TODO leader-w" -t 1000
bind = $leader, f, exec, notify-send "TODO leader-f" -t 1000
bind = $leader, p, exec, notify-send "TODO leader-p" -t 1000
bind = $leader, g, exec, notify-send "TODO leader-g" -t 1000

bind = $leader, a, exec, notify-send "TODO leader-a" -t 1000
bind = $leader, r, exec, notify-send "TODO leader-r" -t 1000
bind = $leader, s, exec, notify-send "TODO leader-s" -t 1000
bind = $leader, t, exec, notify-send "TODO leader-t" -t 1000
bind = $leader, d, exec, notify-send "TODO leader-d" -t 1000

bind = $leader, z, exec, notify-send "TODO leader-z" -t 1000
bind = $leader, x, exec, notify-send "TODO leader-x" -t 1000
# this works at least for kitty, but not for other
# TODO: this seems to glob the shortcut for all app
# bind = $leader, c, sendshortcut, CTRL, c, class:^(firefox)$
# bind = $leader, v, sendshortcut, CTRL, v, class:^(firefox)$
# bind = $leader, b, exec, notify-send "TODO leader-b"

# Right hand
bind = $leader, h, workspace, -1
bind = $leader, n, togglefloating,
bind = $leader, e, fullscreen, 1
bind = $leader, i, workspace, +1
bind = $leader, o, exec, notify-send "TODO leader-o" -t 1000

bind = $leader, j, movetoworkspace, -1
bind = $leader, l, exec, notify-send "TODO leader-l" -t 1000
bind = $leader, u, exec, notify-send "TODO leader-u" -t 1000
bind = $leader, y, movetoworkspace, +1
# Kill waybar as to get out of the `prevent idle`.
bind = $leader, apostrophe, exec, pkill waybar && hyprctl dispatch exec waybar && loginctl lock-session

bind = $leader, k, killactive
bind = $leader, m, exec, notify-send "TODO leader-m" -t 1000
bind = $leader, comma, exec, notify-send "TODO leader-, " -t 1000

bind = $leader, period, exec, notify-send "TODO leader-." -t 1000
bind = $leader, return, exec, $terminal

bind = , XF86Launch5, exec, grim -g "$(slurp)" - | swappy -f - -o - | pngquant - | tee "/tmp/$(date +'screenshot_%s.png')" | wl-copy

# Move/resize windows with leader + LMB/RMB and dragging
bindm = $leader,  $mouse_left,  movewindow
bindm = $leader,  $mouse_right, resizewindow

# Multimedia keys
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# bindl = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86AudioPlay, exec, playerctl play-pause

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule
windowrule = float,class:^(steam)$,title:^(steam)$
windowrule = float,class:^(steamwebhelper)$,title:^(steamwebhelper)$

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# debug {
# 	disable_logs = false
# 	enable_stdout_logs = true
# }

