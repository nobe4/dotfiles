#!/usr/bin/env bash
#
# Setup:
# 1. create an automator workflow that runs one of the following:
#
#  - Terminal.app
#    ```applescript
#    tell application "Terminal" to activate
#    tell application "Terminal" to do script "launch ; exit"
#    ```
#
#  - Kitty
#    ```bash
#    source "${HOME}/.zprofile" && kitty launch
#    ```
#
# 2. Settings > Keyboard > Shortcuts > Services > General > Set the service
#
# TODO:
#   - store logs somewhere for easier debugging
#   - allow to pass a custom "list binaries" command

set -e

PREVIEW_COMMAND="${DOTFILE_FOLDER}/bin/commands/{} -h"
COMMANDS_PATH="${DOTFILE_FOLDER}/bin/commands"

find "${COMMANDS_PATH}" -type f -exec basename {} \; \
  | fzf \
    --preview="${PREVIEW_COMMAND}" \
    --bind="enter:become(${COMMANDS_PATH}/{})"

